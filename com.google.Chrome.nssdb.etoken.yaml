id: com.google.Chrome.nssdb.etoken
branch: '1.0'
runtime: com.google.Chrome
# runtime-version: 'master'
sdk: org.freedesktop.Sdk//24.08
build-extension: true
separate-locales: false
build-options:
  prefix: /app/nssdb
  prepend-path: /app/nssdb/etoken
  prepend-pkg-config-path: /app/nssdb/etoken/lib/pkgconfig
  prepend-ld-library-path: /app/nssdb/etoken/lib
modules:
  - name: etoken
    buildsystem: simple
    # build-commands:
    #   - install -Dm444 org.flatpak.app.plugin.foo.metainfo.xml -t ${FLATPAK_DEST}/share/metainfo
    sources:
      - type: archive
        url: https://nullroute.lt/tmp/2023/pkg/SAC_Linux_10.8.105_R1_GA.zip
        sha256: 18ecac33e8a1ddb894c23423074592ffd77a272a7255b519d20992662a5c699e
        dest-filename: SAC_Linux.zip
      - type: shell
        commands:
          - unzip SAC_Linux.zip
          # - ar x safenetauthenticationclient-core_10.8.1050_amd64.deb
          # - tar xf data.tar.xz
          # - cp -r usr/lib/* /app/lib/etoken/
          # - mkdir -p /app/etc/ssl/nssdb
          # - modutil -dbdir /app/etc/ssl/nssdb -add "eToken" --module /app/lib/etoken/libeToken.so